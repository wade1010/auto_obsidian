# 快速开始指南

## 第一次使用

### 1. 自动设置环境（推荐）

双击运行 `setup_env.bat`，脚本会自动：
- ✅ 检查 Python 版本
- ✅ 创建虚拟环境 (`venv`)
- ✅ 安装所有依赖包

```bash
setup_env.bat
```

### 2. 配置 API Key

编辑 `config/config.yaml`：

```yaml
ai:
  provider: "chatglm"
  api_key: "填写你的智谱AI API密钥"  # 在这里填写
  model: "glm-4"
```

### 3. 启动程序

双击运行 `run.bat`，或：

```bash
venv\Scripts\activate.bat  # 激活环境
python main.py             # 运行程序
```

### 4. 打包成 EXE

双击运行 `build.bat`，生成的文件在 `dist/AutoObsidian.exe`

## 日常使用

### 激活环境
```bash
venv\Scripts\activate.bat
```

### 运行程序
```bash
python main.py
# 或直接双击 run.bat
```

### 打包程序
```bash
build.bat
# 或手动执行
pyinstaller build_spec.py
```

## 脚本说明

| 脚本 | 功能 |
|------|------|
| `setup_env.bat` | 首次安装：创建虚拟环境 + 安装依赖 |
| `run.bat` | 启动程序（自动激活环境） |
| `build.bat` | 打包成 EXE |
| `update_deps.bat` | 更新依赖包到最新版本 |
| `clean_env.bat` | 清理虚拟环境和缓存 |

## 常见问题

### Q: 提示"模块未找到"
```bash
# 确保激活了虚拟环境
venv\Scripts\activate.bat

# 重新安装依赖
pip install -r requirements.txt
```

### Q: 想重新开始
```bash
# 清理环境
clean_env.bat

# 重新安装
setup_env.bat
```

### Q: 打包后EXE运行报错
```bash
# 1. 先测试Python版本能运行
python main.py

# 2. 清理后重新打包
clean_env.bat
setup_env.bat
build.bat
```

## 获取 API Key

- **ChatGLM (智谱AI)**: https://open.bigmodel.cn/
- **OpenAI**: https://platform.openai.com/api-keys

## 目录结构

```
auto_obsidian/
├── venv/                 # 虚拟环境（setup后生成）
├── config/               # 配置文件
├── src/                  # 核心代码
├── gui/                  # 界面代码
├── main.py               # 程序入口
├── setup_env.bat         # 环境设置 ⭐
├── run.bat               # 启动程序 ⭐
├── build.bat             # 打包EXE
├── update_deps.bat       # 更新依赖
├── clean_env.bat         # 清理环境
└── requirements.txt      # 依赖列表
```

## 技术支持

遇到问题请检查：
1. Python 版本是否 >= 3.8
2. 网络连接是否正常
3. API Key 是否正确
4. 虚拟环境是否已激活
